<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma",sans-serif;}
p.msotitlecxspfirst, li.msotitlecxspfirst, div.msotitlecxspfirst
	{mso-style-name:msotitlecxspfirst;
	mso-style-link:"Title Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msotitlecxspmiddle, li.msotitlecxspmiddle, div.msotitlecxspmiddle
	{mso-style-name:msotitlecxspmiddle;
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msotitlecxsplast, li.msotitlecxsplast, div.msotitlecxsplast
	{mso-style-name:msotitlecxsplast;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;}
p.msopapdefault, li.msopapdefault, div.msopapdefault
	{mso-style-name:msopapdefault;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
.MsoChpDefault
	{font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoTitle><a name="_Toc313479386">Update and Refresh Bundles</a></p>

<p class=MsoTocHeading>Contents</p>

<p class=MsoToc1><span lang=NO-BOK><a href="#_Toc347699344"><span lang=EN-US>How
to</span><span lang=EN-US style='color:windowtext;display:none;text-decoration:
none'>. 1</span></a></span></p>

<p class=MsoToc1><span lang=NO-BOK><a href="#_Toc347699345"><span lang=EN-US>Refresh</span><span
lang=EN-US style='color:windowtext;display:none;text-decoration:none'>. 1</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699346"><span lang=EN-US>Restoring
State after Refresh</span><span lang=EN-US style='color:windowtext;display:
none;text-decoration:none'>. 1</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699347"><span lang=EN-US>Refreshing
with build Errors</span><span lang=EN-US style='color:windowtext;display:none;
text-decoration:none'>. 2</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699348"><span lang=EN-US>Refresh
Options</span><span lang=EN-US style='color:windowtext;display:none;text-decoration:
none'>. 2</span></a></span></p>

<p class=MsoToc1><span lang=NO-BOK><a href="#_Toc347699349"><span lang=EN-US>Update</span><span
lang=EN-US style='color:windowtext;display:none;text-decoration:none'>. 2</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699350"><span lang=EN-US>Restoring
State after Update</span><span lang=EN-US style='color:windowtext;display:none;
text-decoration:none'>. 2</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699351"><span lang=EN-US>Update
and Build</span><span lang=EN-US style='color:windowtext;display:none;
text-decoration:none'>. 2</span></a></span></p>

<p class=MsoToc3><span lang=NO-BOK><a href="#_Toc347699352"><span lang=EN-US>Build
Errors</span><span lang=EN-US style='color:windowtext;display:none;text-decoration:
none'>. 2</span></a></span></p>

<p class=MsoToc3><span lang=NO-BOK><a href="#_Toc347699353"><span lang=EN-US>Automatic
Build</span><span lang=EN-US style='color:windowtext;display:none;text-decoration:
none'>. 2</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699354"><span lang=EN-US>Update
and Stale References</span><span lang=EN-US style='color:windowtext;display:
none;text-decoration:none'>. 2</span></a></span></p>

<p class=MsoToc2><span lang=NO-BOK><a href="#_Toc347699355"><span lang=EN-US>Update
Bundles Manually</span><span lang=EN-US style='color:windowtext;display:none;
text-decoration:none'>. 2</span></a></span></p>

<p class=MsoNormal>&nbsp;</p>

<h1><a name="_Toc347699344">How to</a></h1>

<p class=MsoNormal>A bundle is started when first <span lang=NO-BOK><a
href="Activate%20and%20Deactivate%20Bundles.htm"
title="Describes how to activate bundles"><span lang=EN-US>activated</span></a></span>
. When activated, you can then refresh multiple bundles from the Bundle main
menu and individual bundles from the context pop-up menus in the Package
Explorer, Bundle Detail Page View and the Bundle List Page View.&nbsp;&nbsp;
There are also local tool bars in the Details and List pages for refreshing
bundles individually.&nbsp; </p>

<p class=MsoNormal>If the <span lang=NO-BOK><a
href="Setting%20Bundle%20Options.htm#UpdateOnBuild"><span lang=EN-US>Update on
Build</span></a></span> option is switched on, update becomes an implicit
command and automatically executed each time one or more activated bundle
projects are built. If the option is off, an update command is available from
the main and local pop-up menus and tool bars.  When there are bundle projects
that have not been updated since the last build a status indicating that update
is pending is shown.</p>

<h1><a name="_Toc347699345">Refresh</a></h1>

<p class=MsoNormal>Refresh calculates the requiring dependency closure which is
all bundles that directly and indirectly require capabilities from the set of
bundles to refresh. The set of calculated bundles are stopped and unresolved
forcing a replacement or removal of packages exported by the refreshed
bundle(s)<span style='color:black'>.&nbsp; When unresolved n</span>o wiring
will exist among the bundles. This makes the bundle wirings available for
garbage collection.&nbsp; Then an attempt is made to resolve the bundles by
creating new wirings based on the dependencies between the bundles.&nbsp; </p>

<h2><a name="_Toc347699346">Restoring State after Refresh</a></h2>

<p class=MsoNormal>If you refresh a lazy activated bundle that is in state
ACTIVE, STARTING/&lt;&lt;LAZY&gt;&gt; or RESOLVED it will return to same state
after refresh. Eagerly activated bundles also return to their pre refresh
RESOLVED or ACTIVE state. &nbsp;</p>

<h2><a name="_Toc347699347">Refreshing with build Errors</a></h2>

<p class=MsoNormal>If you refresh an ACTIVE or RESOLVED bundle with build
errors and the Activate bundle projects with Java build errors option is off,
the current revision and the wirings of the bundle is used.&nbsp; The bundles
are updated after a successful build.</p>

<h2><a name="_Toc347699348">Refresh Options</a></h2>

<p class=MsoNormal>By default a refresh command is issued on a bundle being
updated and its requiring bundles. This will guarantee that older revisions of
the bundle are released.&nbsp; See the <a
href="Setting%20Bundle%20Options.htm#RefreshOnUpdate">Refresh on Update</a>
option for a detailed description.</p>

<h1><a name="_Toc347699349">Update</a></h1>

<p class=MsoNormal>An activated bundle is by default automatically updated
after the associated project has been built. The updated version of the bundle
is read from the input stream and installed. The bundle is then refreshed if
the <a href="Setting%20Bundle%20Options.htm#RefreshOnUpdate">Refresh on Update</a>
option is on and resolved if not. Lastly the bundle is started if it was ACTIVE
before the update command was executed. The new compiled code is loaded and
becomes the current active code in the updated bundle at the time the start
method of the activator is invoked.</p>

<p class=MsoNormal>Deactivated bundles do not participate explicit in the
update process, but may be activated implicit, and thus updated, due to code
changes involving importing packages from deactivated&nbsp;bundles in activated
bundles to update.</p>

<h2><a name="_Toc347699350">Restoring State after Update</a></h2>

<p class=MsoNormal>After an update operation is complete the bundle is moved to
the same state as it was in before the update operation. An exception is a
bundle in state RESOLVED, with a lazy activation policy that is refreshed after
update. In this case the state after update is STARTING/&lt;&lt;LAZY&gt;&gt;.</p>

<h2><a name="_Toc347699351">Update and Build</a></h2>

<h3><a name="_Toc347699352">Build Errors</a></h3>

<p class=MsoNormal>If an activated bundle project with bundle errors is built,
update is skipped and the current revision and wires are used. The same is true
if the Activate bundle projects with Java build errors is off. See the <a
name="_Toc312283492"></a><a href="../concepts/Bundle%20Project%20Errors.htm">Managing
Bundle Project Errors</a> for a description of possible error types. An
activated bundle always reflects the last successful build as long as the <a
href="Setting%20Bundle%20Options.htm#UpdateOnBuild">Update on Build</a> option
is on.</p>

<h3><a name="_Toc347699353">Automatic Build</a></h3>

<p class=MsoNormal>When the Build Automatically option is on, projects are
built according to default or custom build rules defined for projects. This
implies that decisions when to build, which projects to build and kind of build
(full or incremental) varies and bundle updates are fully controlled by these
rules.</p>

<h2><a name="_Toc347699354">Update and Stale References</a></h2>

<p class=MsoNormal>An activated bundle is stopped (if in state ACTIVE) and
unresolved before resolved and started again during the update process. This
happens every time a project is built and can cause stale references if
resources are not released (e.g. in the stop method of the activator of a
bundle) when a bundle is stopped or unresolved during the development of a
bundle.</p>

<h2><a name="_Toc347699355"></a><a name=UpdateBundlesManually></a>Update
Bundles Manually</h2>

<p class=MsoNormal>Bundles are by default updated when built. It is possible to
disable this feature by turning the <a
href="Setting%20Bundle%20Options.htm#UpdateOnBuild">Update on Build</a> option
off. You can then control the update of bundles manually. Independent of the
Update on Build options it is possible to update bundles manually from the
bundle menus at any time for activated bundles. </p>

</div>

</body>

</html>
