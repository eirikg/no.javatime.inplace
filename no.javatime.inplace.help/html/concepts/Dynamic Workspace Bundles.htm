<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Cambria",serif;
	color:#365F91;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Cambria",serif;
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
p.msonormal0, li.msonormal0, div.msonormal0
	{mso-style-name:msonormal;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma",sans-serif;}
p.msotitlecxspfirst, li.msotitlecxspfirst, div.msotitlecxspfirst
	{mso-style-name:msotitlecxspfirst;
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msotitlecxspmiddle, li.msotitlecxspmiddle, div.msotitlecxspmiddle
	{mso-style-name:msotitlecxspmiddle;
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msotitlecxsplast, li.msotitlecxsplast, div.msotitlecxsplast
	{mso-style-name:msotitlecxsplast;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	font-size:26.0pt;
	font-family:"Cambria",serif;
	color:#17365D;
	letter-spacing:.25pt;}
p.msolistparagraphcxspfirst, li.msolistparagraphcxspfirst, div.msolistparagraphcxspfirst
	{mso-style-name:msolistparagraphcxspfirst;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.msolistparagraphcxspmiddle, li.msolistparagraphcxspmiddle, div.msolistparagraphcxspmiddle
	{mso-style-name:msolistparagraphcxspmiddle;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.msolistparagraphcxsplast, li.msolistparagraphcxsplast, div.msolistparagraphcxsplast
	{mso-style-name:msolistparagraphcxsplast;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Calibri",sans-serif;}
p.msopapdefault, li.msopapdefault, div.msopapdefault
	{mso-style-name:msopapdefault;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
.MsoChpDefault
	{font-size:10.0pt;
	font-family:"Calibri",sans-serif;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 70.85pt 70.85pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoTitle><a name="_Toc312283492">Dynamic Bundle </a>Projects</p>

<p class=MsoTocHeading><a name="_Toc431586717">Contents</a></p>

<p class=MsoToc1><a href="#_Toc434077196">A Dynamic Workspace for Plug-ins and
Bundles<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077197">Activating Bundle Projects and the
Workspace Region<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077198">Updating Bundle Projects<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077199">Target and Development Platform<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077200">Bundle Versions<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077201">Bundle Dependencies<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc434077202">Activate Providing Bundles<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc434077203">Deactivate Requiring Bundles<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc434077204">Update Bundles<span style='color:
windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc434077205">Dependency Rules<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc1><a href="#_Toc434077206">Bundle Project Commands<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoToc2><a href="#_Toc434077207">Bundle Project Commands Relationships<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></p>

<p class=MsoNormal>&nbsp;</p>

<h1><a name="_Toc434077196">A Dynamic Workspace for Plug-ins and Bundles</a></h1>

<p class=MsoNormal>A workspace plug-in project or bundle project, if <a
href="#_Activating_Bundle_Projects">activated</a>, is installed, resolved and
started from an originating plug-in or bundle source project after Eclipse has
been started. The term bundle project is used when referring to both the
project and its bundle at the same time as one coherent unit. The term plug-in
is used when it is important to distinguish it from a bundle. For a description
of the difference between a bundle and a plug-in see the <a
href="http://javatime.no/blog/dynamic-bundles-in-eclipse/">Dynamic Bundles in
Eclipse</a> blog.  The same goes for bundle projects, where project is used
when referring to a source or built project that has the Java and plug-in
nature enabled and bundle is used when referring to the bundle associated with
the project. The term external bundle is used when referring to a deployed jar
bundle which, in contrast to a bundle project in this context, typically is
installed and started during startup of Eclipse and uninstalled at shut down.</p>

<p class=MsoNormal>Both bundle projects and external bundles are dynamic in the
sense that they may change state after they are installed. In contrast bundle
dynamically change its runtime behavior when source projects are updated or
changed during an Eclipse session. External, or deployed, bundles require a
manual re-installation or an installation of a new version to change its
runtime behavior.</p>

<p class=MsoNormal>A bundle project can be dependent on and require
capabilities from deployed bundles, but a deployed bundle, with a few
exceptions, cannot require capabilities from a bundle project. The exceptions
include call backs from deployed bundles to workspace bundles at runtime and workspace
fragment bundles attached to a deployed bundle. From this follows that external
bundles provide capabilities to bundle projects and a bundle project does not
provide capabilities to deployed bundles during an Eclipse session.</p>

<p class=MsoNormal>Bundle projects can be viewed as a set of bundles - and
plug-ins - in a bound workspace region disjoint from the set of external
bundles and plug-ins that are providing capabilities to the bundle projects.
&nbsp;A bundle project first becomes an external bundle when it is deployed.</p>

<h1><a name="_Toc434077197"></a><a name="_Toc431586718"></a><a
name=ActivatingBundleProjects></a><a name="_Activating_Bundle_Projects"></a>Activating
Bundle Projects and the Workspace Region</h1>

<p class=MsoNormal>A workspace region is the set of all open bundle projects in
the workspace. The term region is used to distinguish bundle projects from
other bundles hosted by the OSGi framework.</p>

<p class=MsoNormal>If a bundle is in state UNINSTALLED, the workspace region is
said to be deactivated. In a deactivated workspace region all bundle projects
in the workspace are in state UNINSTALLED. When a bundle project is activated
in a deactivated workspace region the first set of bundle transitions are to
install all bundles in the workspace region and second to resolve and
optionally start the activated bundles. Thus, in an activated workspace,
activated bundles are at least in state RESOLVED while deactivated bundles are
in state INSTALLED.</p>

<h1><a name="_Toc431586719"></a><a name="_Toc434077198">Updating Bundle
Projects</a> </h1>

<p class=MsoNormal>This is where dynamics come into play. It is not possible to
update external bundles dynamically within an Eclipse session as opposed to
bundle projects. For bundle projects the build system in combination with the
dynamics of OSGi is utilized is to update, resolve and start (execute) bundles
automatically after their projects have been built. </p>

<p class=MsoNormal>The tight loop between source code changes and execution is
especially efficient when doing <span lang=EN>Rapid Application Development
(RAD) </span>testing small incremental changes in bundles.&nbsp; The
functionality is in general useful for any tool or project (e.g. design tools
or code generators) in need for a runtime environment embedded in the
development workspace.</p>

<h1><a name="_Toc431586720"></a><a name="_Toc434077199">Target and Development
Platform</a></h1>

<p class=MsoNormal>Traditionally to activate and execute workspace plug-ins
projects in Eclipse the Run command is used to launch a new instance of the
Eclipse IDE, called the target platform. By default, this activates all bundles
defined in the runtime configuration of the target platform together with the
bundle projects in the workspace. The target platform is known as the execution
or runtime environment for the bundle projects under development. </p>

<p class=MsoNormal>The source or development platform is where the bundles are
developed and built. In the context of bundle projects, the target and
development platform is treated the same and thus the same instance of the IDE
(workbench) is used both for the target and development platform. </p>

<h1><a name="_Toc431586721"></a><a name="_Toc434077200">Bundle Versions</a></h1>

<p class=MsoNormal>Versions become important when bundles are packed in jars,
deployed, installed and resolved by an external OSGi container. In a deployed
scenario different versions of a bundle may run at the same time where each
version usually only has one revision. In the same manner different versions of
workspace bundles with the same symbolic name, but different location
identifiers, may run simultaneously. This may be the case if you copy a project
to a different location, changes the version and then activates the bundle. </p>

<p class=MsoNormal>By default, it is not possible to have bundle projects with
the same symbolic name as an external bundle even if the version between them
are different. This can be tweaked by setting some external options Eclipse
from version 3.7-3.8x and onwards. This has changed somewhat in version 4.x,
where duplicates are not pulled in to the resolver, as opposed to in version
3.7-3.8x.</p>

<h1><a name="_Toc434077201"></a><a name="_Toc431586722"></a><a
name=BuindleDependencies></a>Bundle Dependencies</h1>

<p class=MsoNormal>A new revision is assigned to a bundle each time it is
installed and updated and removed when the bundle is uninstalled. Old revisions
are removed when a bundle is refreshed.</p>

<p class=MsoNormal>A requiring bundle dependency implies that a bundle directly
or indirectly requires some capabilities provided by another bundle (called the
requiring dependency closure). </p>

<p class=MsoNormal>For example, an Export-Package clause is a capability and an
Import-Package clause is a requirement. During the resolving phase the
requirements are resolved to matching capabilities by creating a Bundle Wire. A
wiring is created each time a bundle revision is resolved, holding the wires to
other bundle wirings as well as maintaining the run time state of the bundle.
This means that a bundle may have multiple revisions.</p>

<p class=MsoNormal>If the contract between two bundles is broken because
exported packages are withdrawn or the API of interfaces in exported packages
is broken this will result in compile time errors and the involved bundles will
not resolve. In this case, if any, the current revision and wiring is used. </p>

<p class=MsoNormal>When installing, updating and executing bundles directly
from compiled source files, the last resolve holds the current revision and its
wires of the bundle. Every time a bundle is updated after a change, a new
revision called the current revision of the bundle is created and when resolved
new wires are bound to that revision. Earlier revision(s) and the wires of the
bundle are released during the update process when bundle is refreshed after an
update.&nbsp; </p>

<p class=MsoNormal>&nbsp;A workspace bundle may have many revisions at the same
time. Other bundles may require capabilities or services from different
revisions of a bundle. A bundle changes from the usage of an older revision to
a newer revision of a bundle if possible when the bundle is refreshed.&nbsp;
Bundles may be refreshed manually from the UI and are always refreshed
automatically when deactivated (unresolved or uninstalled) and after update if
the<a href="../tasks/Setting%20Bundle%20Options.htm#RefreshOnUpdate"> Refresh
on Update</a> option is switched on (default). </p>

<h2><a name="_Toc434077202"></a><a name="_Toc335581793"></a><a
name="_Toc431586723"></a>Activate Providing Bundles</h2>

<p class=MsoNormal>If bundle A is dependent on bundle B, and bundle A is activated,
bundle B has to be activated to.&nbsp; If you activate a providing bundle, as
in this case bundle B, this does not imply activation of the requiring bundle
(bundle A). </p>

<h2><a name="_Toc434077203"></a><a name="_Toc335581794"></a><a
name="_Toc431586724"></a>Deactivate Requiring Bundles</h2>

<p class=MsoNormal>When deactivating bundles, the rule is reversed. That is,
deactivating a providing bundle (bundle B) the requiring bundle is also
deactivated (bundle A), but when deactivating a requiring bundle (bundle A),
bundle B is unchanged. </p>

<h2><a name="_Toc431586725"></a><a name="_Toc434077204">Update Bundles</a></h2>

<p class=MsoNormal>When a bundle is updated, the bundle and all requiring
bundles are stopped in correct dependency order. Then the bundle is updated and
refreshed if the <a
href="../tasks/Setting%20Bundle%20Options.htm#RefreshOnUpdate">Refresh on
Update</a> option is switched on. &nbsp;The refresh operation releases any
existing wires and new wires are created. When the option is off the bundle is
resolved after update where old unused revisions are not released.&nbsp; Lastly
all providing bundles are started in correct dependency order. </p>

<h2><a name="_Toc434077205"></a><a name="_Toc431586726"></a><a
name="_Toc335581795"></a><a name=DepencencyRules></a>Dependency Rules</h2>

<p class=MsoNormal>The activation/deactivation is in principle controlled by
three basic dependency rules:</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·</span><span style='font-size:7.0pt;line-height:
115%;font-family:"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>Directed</b><br>
Dependencies between bundles goes only in one direction; - From a requiring
bundle to a providing bundle.&nbsp; The requiring (dependent) bundle is
dependent on the providing (independent) bundle.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·</span><span style='font-size:7.0pt;line-height:
115%;font-family:"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>Acyclic</b> <br>
States that a dependency relationship cannot be circular. If bundle A requires
capabilities from a providing bundle B, bundle A is said to be dependent on B.
Thus bundle B cannot at the same time be dependent on bundle A.&nbsp; This is
also true for transitive dependencies, as stated in the next bullet.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><span
style='font-family:Symbol'>·</span><span style='font-size:7.0pt;line-height:
115%;font-family:"Times New Roman",serif'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b>Transitive</b><br>
Dependency relationships spans across bundles. If bundle A is dependent on
bundle B and bundle B is dependent on bundle C, bundle A is also dependent on
bundle C.</p>

<p class=MsoNormal>When a bundle is activated or deactivated the direction of
the dependency and the acyclic and transitive properties of the relationships
between bundles controls which additional bundles are activated or deactivated.
</p>

<p class=MsoNormal>By design the InPlace Activator automatically enforce
changes in life cycle of bundles that have relationships to other bundles that
have their life cycle changed. For instance, when a bundle that requires
capabilities form another bundle is activated the providing bundle is also
activated.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>

<p class=MsoNormal>When an Eclipse session ends all bundles are uninstalled and
refreshed before Eclipse shuts down. When starting a new session, activated
bundles from earlier sessions are by default started but bundles in state
RESOLVED at shutdown return to state RESOLVED at next startup.</p>

<h1><a name="_Toc434077206"></a><a name=BundleProjectCommands></a><a
name="_Toc315528805"></a><a name=BundleStatesAndTransitions></a><a
name="_Toc431586727"></a>Bundle Project Commands</h1>

<p class=MsoNormal><a name="_Toc315528806"></a><a name="_Toc431586728"></a>This
section presents an overview of the rules and a summary of project and bundle
commands, how they are interpreted and the relationship between them. For a
description of the functionality for each command set the “Tasks” section. A
list of relevant terms is presented first. </p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><a
name="_Toc335574308"><span style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Project and Bundle Relationships</b></a></p>

<p class=MsoNormal>There is a <a name=idx131></a><a name=idx132></a>conditional
<i>one-to-one</i> (1:0-1)<span style='font-size:9.5pt;line-height:115%;
font-family:"Arial",sans-serif;color:black'> part of </span>relationship<span
style='font-size:9.5pt;line-height:115%;font-family:"Arial",sans-serif;
color:black'> </span>between a project and a workspace bundle. The relationship
is uniquely defined by the project name and one of the bundle identifiers,
which for a workspace bundle, is the combination of the symbolic name and the
version as defined in the manifest file. The part-of relationship is physically
implemented by the fact that the manifest file is part of the project
identified by the project name. The project and the bundle also share a common
location identifier, which is used to install the bundle from the project. When
a bundle is in state UNINSTALLED the relationship is (1:0), and (1:1) for all
other bundle states.</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><a
name="_Toc315528811"><span style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Transitions and Bundle </b></a><b>Commands</b></p>

<p class=MsoNormal>There is a one-to-one relationship between a transition and
an atomic OSGi bundle command or operation. Every atomic bundle command has a
corresponding transition in the <a
href="Bundle%20Project%20Errors.htm#ErrorManagement">state diagram</a>. In
addition to the set of atomic commands, activate, deactivate, reset and update
are recognized as <a href="#AtomicAndCompositeCommands">composite</a> bundle
commands</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><a
name="_Toc315528814"><span style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Project CRUD </b></a><b>Commands</b></p>

<p class=MsoNormal>All workspace and project commands that manipulate a project
as a whole or the content in a project associated with a bundle are considered
CRUD operations. The project commands are Create (new, open, import), Rename
(rename, move), Update (save, save all file(s)), Delete (delete, close) and
Build (manual and automatic build). <a name="_Toc315528813"></a><a
name="_Toc431586731"></a></p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><a
name=AtomicAndCompositeCommands><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Atomic and Composit</b></a><b>e Commands</b></p>

<p class=MsoNormal>A bundle command or transition is an atomic or a composite
command. Composite commands consist of a combination of atomic bundle commands
and project commands. Activate, deactivate, reset and update are composite
bundle commands, while install, uninstall, resolve, refresh, update, start and
stop are atomic bundle commands. Note that <a href="#UpdateRole">update is both
a composite and an atomic</a> command depending on the context. <a
name="_Toc431586732"></a><a name="_Toc431586733"></a>All project commands are
atomic commands. </p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'><a
name="_Toc315528815"><span style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Implicit and Explicit Commands</b></a></p>

<p class=MsoNormal>Bundle commands are divided into explicit (activate,
deactivate, reset, refresh, update, start, stop) and implicit (install,
uninstall, update, resolve) commands. Update is both an implicit and an
explicit command. Update is implicit when triggered by a build command.
Explicit commands are executed directly from the UI. Implicit commands are
executed automatically when a project CRUD or an explicit bundle command is
issued. All projects commands, except for build, are explicit commands. Build
is characterized as an implicit command if the “Build Automatically” option is
on and as an explicit command if executed directly form the UI.</p>

<h2><a name="_Toc434077207">Bundle Project Commands Relationships</a></h2>

<p class=MsoNormal>A basic use case, can as a sample, illustrate the
relationship between the save and build project commands and the composite
update bundle command:</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Activate
bundle projects to enable bundle operations on the activated bundles</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Repeatedly
save and build projects with an automatic update of activated bundles after
each build</p>

<p class=MsoListParagraph style='margin-left:18.0pt;text-indent:-18.0pt'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Deactivate
bundles to disable all explicit and implicit bundle commands available, but
activate</p>

<p class=MsoNormal>In this basic scenario, for each source change, projects are
saved and built and bundles are stopped, updated, resolved and started again.
Activate and deactivate are explicit composite bundle commands, while update is
an implicit composite command comprising stop, update (different from this
composite update command), resolve and start as implicit atomic bundle commands
executed in sequence behind the scene by update.</p>

<p class=MsoNormal>Nine project commands, seven atomic bundle commands and four
composite bundle commands are recognized as bundle projects commands. In the
basic scenario, save and build are project commands while update is a composite
bundle command. Implicit bundle commands are executed in response to project
commands while explicit bundle commands are executed from the UI. <a
name=UpdateRole>Note in this use case update </a>has two roles. First of all,
it is a composite command stopping bundles before update takes place and
resolve and start bundles after they have been updated. Second it is an atomic
command that is part of the composite update command. When explicit referring
to the OSGi update command it is treated an atomic bundle command.</p>

<p class=MsoNormal>There is an intermediate layer sitting between project and
explicit bundle commands and the OSGi life cycle module, interpreting the
project and explicit bundle commands. The intermediate layer analyze errors
produced by the build system, detects additional errors and make decisions on
what kind of bundle operations to execute based on project and explicit bundle
commands issued from the UI and the implicit build operation.</p>

<p class=MsoNormal><a name="_Toc431586729"></a>&nbsp;A typical use case is the
New (create, import or open a project) project command. When creating a new
project, it is added to the workspace region and installed if the workspace
region is activated and left in state UNINSTALLED if the workspace region is
deactivated. The same is true when opening and importing a project as long as
it was not activated when closed or exported. If the project was activated when
exported or closed it has to be installed, resolved and started when imported
or opened. If the workspace region was deactivated before the project was
imported or opened all other bundle projects in the workspace region have to be
installed. In addition, if the project is dependent on other projects in the
workspace region, they have to be activated along with the imported or opened
project.</p>

</div>

</body>

</html>
